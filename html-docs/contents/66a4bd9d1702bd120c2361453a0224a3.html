<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>linkMethod</title>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Source+Code+Pro:300,400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../assets/css/bootstrap.css">
<link rel="stylesheet" href="../assets/css/jquery.bonsai.css">
<link rel="stylesheet" href="../assets/css/main.css">
<link rel="stylesheet" href="../assets/icon-font/icons.css">
<script type="text/javascript" src="../assets/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="../assets/js/bootstrap.js"></script>
<script type="text/javascript" src="../assets/js/jquery.bonsai.js"></script>

  </head>
  <body>
    <div>

      <!-- Name Title -->

      <h1>linkMethod</h1>

      <!-- Type and Stereotype -->

      <section style="margin-top: .5em;">
        <span class="alert alert-info">
          <span class="node-icon staruml-icon icon-UMLOperation"></span>
          UMLOperation
        </span>
        
      </section>

      <!-- Path -->

      <section style="margin-top: 10px">
        
        
        
          
          <span class="label label-info"><a href='cf9c8b720f3815adeccaf3ef6e48c6c4.html'><span class='node-icon staruml-icon icon-Project'></span>UML</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='da2be80fe6e48fd9d101c1429f49bd58.html'><span class='node-icon staruml-icon icon-UMLModel'></span>openJDK</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='ee78c922cc529ca62752f771c0bb7b9d.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>java</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='a93b2fc56794e246bf26838d14b54f65.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>lang</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='e4c701803145d5e3dc249c369d7c56bb.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>invoke</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='473debfec3443339bd5a233bee30bbc4.html'><span class='node-icon staruml-icon icon-UMLClass'></span>MethodHandleNatives</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='66a4bd9d1702bd120c2361453a0224a3.html'><span class='node-icon staruml-icon icon-UMLOperation'></span>linkMethod</a></span>
        
      </section>

      <!-- Diagram -->

      

      <!-- Description -->

      
      <section>
        <h3>Description</h3>
        <div>
          
            <p>The JVM wants to link a call site that requires a dynamic type check.
Name is a type-checking invoker, invokeExact or invoke.
Return a JVM method (MemberName) to handle the invoking.
The method assumes the following arguments on the stack:
0: the method handle being invoked
1-N: the arguments to the method handle invocation
N+1: an optional, implicitly added argument (typically the given MethodType)
&lt;p&gt;
The nominal method at such a call site is an instance of
a signature-polymorphic method (see @PolymorphicSignature).
Such method instances are user-visible entities which are
&quot;split&quot; from the generic placeholder method in {@code MethodHandle}.
(Note that the placeholder method is not identical with any of
its instances.  If invoked reflectively, is guaranteed to throw an
{@code UnsupportedOperationException}.)
If the signature-polymorphic method instance is ever reified,
it appears as a &quot;copy&quot; of the original placeholder
(a native final member of {@code MethodHandle}) except
that its type descriptor has shape required by the instance,
and the method instance is &lt;em&gt;not&lt;/em&gt; varargs.
The method instance is also marked synthetic, since the
method (by definition) does not appear in Java source code.
&lt;p&gt;
The JVM is allowed to reify this method as instance metadata.
For example, {@code invokeBasic} is always reified.
But the JVM may instead call {@code linkMethod}.
If the result is an
ordered pair of a {@code (method, appendix)},
the method gets all the arguments (0..N inclusive)
plus the appendix (N+1), and uses the appendix to complete the call.
In this way, one reusable method (called a &quot;linker method&quot;)
can perform the function of any number of polymorphic instance
methods.
&lt;p&gt;
Linker methods are allowed to be weakly typed, with any or
all references rewritten to {@code Object} and any primitives
(except {@code long}/{@code float}/{@code double})
rewritten to {@code int}.
A linker method is trusted to return a strongly typed result,
according to the specific method type descriptor of the
signature-polymorphic instance it is emulating.
This can involve (as necessary) a dynamic check using
data extracted from the appendix argument.
&lt;p&gt;
The JVM does not inspect the appendix, other than to pass
it verbatim to the linker method at every call.
This means that the JDK runtime has wide latitude
for choosing the shape of each linker method and its
corresponding appendix.
Linker methods should be generated from {@code LambdaForm}s
so that they do not become visible on stack traces.
&lt;p&gt;
The {@code linkMethod} call is free to omit the appendix
(returning null) and instead emulate the required function
completely in the linker method.
As a corner case, if N==255, no appendix is possible.
In this case, the method returned must be custom-generated to
perform any needed type checking.
&lt;p&gt;
If the JVM does not reify a method at a call site, but instead
calls {@code linkMethod}, the corresponding call represented
in the bytecodes may mention a valid method which is not
representable with a {@code MemberName}.
Therefore, use cases for {@code linkMethod} tend to correspond to
special cases in reflective code such as {@code findVirtual}
or {@code revealDirect}.</p>
          
        </div>
      </section>
      

      <!-- Specification -->

      

      <!-- Directed Relationship -->

      

      <!-- Undirected Relationship -->

      

      <!-- Classifier -->

      

      <!-- Interface -->

      

      <!-- Component -->

      

      <!-- Node -->

      

      <!-- Actor -->

      

      <!-- Use Case -->

      

      <!-- Template Parameters -->

      

      <!-- Literals -->

      

      <!-- Attributes -->

      

      <!-- Operations -->

      

      <!-- Receptions -->

      

      <!-- Extension Points -->

      

      <!-- Parameters -->

      
      <section>
        <h3>Parameters</h3>
        <table class="table table-striped table-bordered">
          <tr>
            <th>Direction</th>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="840b4b4165b1d5e8043a373b932d11b7.html">callerClass</a></td>
            <td><a href='f79fb6289b3c02076149e6d25422e6b5.html'><span class='node-icon staruml-icon icon-UMLClass'></span>Class</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="6108f5702b1d8d0759d88aa0fea75424.html">refKind</a></td>
            <td>int</td>
            <td></td>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="597059081601b81f2e6bb384990803a7.html">defc</a></td>
            <td><a href='f79fb6289b3c02076149e6d25422e6b5.html'><span class='node-icon staruml-icon icon-UMLClass'></span>Class</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="3be603a414274ec10d0dddf42e777f49.html">name</a></td>
            <td>String</td>
            <td></td>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="1513f2c1fd4f2cef2e54544165aa9151.html">type</a></td>
            <td><a href='9807778a1dc80e44cb00043ed570dba6.html'><span class='node-icon staruml-icon icon-UMLClass'></span>Object</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>in</td>
            <td><a href="ad707f7d22db8185239e9719b0b9e758.html">appendixResult</a></td>
            <td><a href='9807778a1dc80e44cb00043ed570dba6.html'><span class='node-icon staruml-icon icon-UMLClass'></span>Object</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>return</td>
            <td><a href="9688bd9f5397a481ae358bb044327cce.html">(unnamed)</a></td>
            <td><a href='618b2ad4ae121651d6f86837b4a6d000.html'><span class='node-icon staruml-icon icon-UMLClass'></span>MemberName</a></td>
            <td></td>
          </tr>
          
        </table>
      </section>
      

      <!-- Diagrams -->

      
      

      <!-- Behavior -->

      

      <!-- Action -->

      

      <!-- Interaction -->

      

      <!-- CombinedFragment -->

      

      <!-- Activity -->

      

      <!-- State Machine -->

      

      <!-- State Machine -->

      

      <!-- State -->

      

      <!-- Vertex -->

      

      <!-- Transition -->

      

      <!-- Data Model (ERD) -->

      

      <!-- Columns (ERD) -->

      

      <!-- Related Entities (ERD) -->

      

      <!-- Data Flows (DFD) -->

      

      <!-- Flows (Flowchart) -->

      

      <!-- Properties -->

      <section>
        <h3>Properties</h3>
        
        <table class="table table-striped table-bordered">
    <tr>
        <th width="50%">Name</th>
        <th width="50%">Value</th>
    </tr>
    
    
    
    
    
    
    
    <tr>
        <td>name</td>
        <td>linkMethod</td>
    </tr>
    
    
    
    
    
    
    
    
    
    
    
    <tr>
        <td>stereotype</td>
        <td><span class='label label-info'>null</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>visibility</td>
        <td>package</td>
    </tr>
    
    
    
    
    
    
    
    <tr>
        <td>isStatic</td>
        <td><span class='label label-info'>true</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isLeaf</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>parameters</td>
        <td>
            
            
            <a href='840b4b4165b1d5e8043a373b932d11b7.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>callerClass</a>
            
            <span>, </span>
            <a href='6108f5702b1d8d0759d88aa0fea75424.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>refKind</a>
            
            <span>, </span>
            <a href='597059081601b81f2e6bb384990803a7.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>defc</a>
            
            <span>, </span>
            <a href='3be603a414274ec10d0dddf42e777f49.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>name</a>
            
            <span>, </span>
            <a href='1513f2c1fd4f2cef2e54544165aa9151.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>type</a>
            
            <span>, </span>
            <a href='ad707f7d22db8185239e9719b0b9e758.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>appendixResult</a>
            
            <span>, </span>
            <a href='9688bd9f5397a481ae358bb044327cce.html'><span class='node-icon staruml-icon icon-UMLParameter'></span>(Parameter)</a>
            
        </td>
    </tr>
    
    
    
    
    
    <tr>
        <td>raisedExceptions</td>
        <td>
            
        </td>
    </tr>
    
    
    
    
    
    <tr>
        <td>concurrency</td>
        <td>sequential</td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isQuery</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isAbstract</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>specification</td>
        <td></td>
    </tr>
    
    
    
    
    
    
    
    
    
</table>                

      </section>

      <!-- Tags -->

      

      <!-- Constraints, Dependencies, Dependants -->

      
        
        


        
        


        
        

      

      <!-- Relationships -->

      
      


      <!-- Owned Elements -->

      
      


    </div>
  </body>
</html>
