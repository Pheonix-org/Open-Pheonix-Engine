<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Reference</title>
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic|Source+Code+Pro:300,400,700' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="../assets/css/bootstrap.css">
<link rel="stylesheet" href="../assets/css/jquery.bonsai.css">
<link rel="stylesheet" href="../assets/css/main.css">
<link rel="stylesheet" href="../assets/icon-font/icons.css">
<script type="text/javascript" src="../assets/js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="../assets/js/bootstrap.js"></script>
<script type="text/javascript" src="../assets/js/jquery.bonsai.js"></script>

  </head>
  <body>
    <div>

      <!-- Name Title -->

      <h1>Reference</h1>

      <!-- Type and Stereotype -->

      <section style="margin-top: .5em;">
        <span class="alert alert-info">
          <span class="node-icon staruml-icon icon-UMLClass"></span>
          UMLClass
        </span>
        
      </section>

      <!-- Path -->

      <section style="margin-top: 10px">
        
        
        
          
          <span class="label label-info"><a href='cf9c8b720f3815adeccaf3ef6e48c6c4.html'><span class='node-icon staruml-icon icon-Project'></span>UML</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='da2be80fe6e48fd9d101c1429f49bd58.html'><span class='node-icon staruml-icon icon-UMLModel'></span>openJDK</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='ee78c922cc529ca62752f771c0bb7b9d.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>java</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='a93b2fc56794e246bf26838d14b54f65.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>lang</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='15753887fa8ec49013d3e8f2b4bd5fe3.html'><span class='node-icon staruml-icon icon-UMLPackage'></span>ref</a></span>
        
          <span>::</span>
          <span class="label label-info"><a href='f6861f52766947b0a2b5df491838311e.html'><span class='node-icon staruml-icon icon-UMLClass'></span>Reference</a></span>
        
      </section>

      <!-- Diagram -->

      

      <!-- Description -->

      
      <section>
        <h3>Description</h3>
        <div>
          
            <p>Copyright (c) 1997, 2019, Oracle and/or its affiliates. All rights reserved.
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
This code is free software; you can redistribute it and/or modify it
under the terms of the GNU General Public License version 2 only, as
published by the Free Software Foundation.  Oracle designates this
particular file as subject to the &quot;Classpath&quot; exception as provided
by Oracle in the LICENSE file that accompanied this code.
This code is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
version 2 for more details (a copy is included in the LICENSE file that
accompanied this code).
You should have received a copy of the GNU General Public License version
2 along with this work; if not, write to the Free Software Foundation,
Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
or visit www.oracle.com if you need additional information or have any
questions.
Abstract base class for reference objects.  This class defines the
operations common to all reference objects.  Because reference objects are
implemented in close cooperation with the garbage collector, this class may
not be subclassed directly.
@author   Mark Reinhold
@since    1.2</p>
          
        </div>
      </section>
      

      <!-- Specification -->

      

      <!-- Directed Relationship -->

      

      <!-- Undirected Relationship -->

      

      <!-- Classifier -->

      
        
        


        
        
<section class="element-list">
    <h3>Specialized Elements</h3>
    <ul class="nav nav-list">
        
        <li><a href='9dee49e16f0827a4402f4334c4dc9251.html'><span class='node-icon staruml-icon icon-UMLClass'></span>FinalReference</a></li>
        
        <li><a href='8dfa61b89b57abe81be332add3254d8c.html'><span class='node-icon staruml-icon icon-UMLClass'></span>PhantomReference</a></li>
        
        <li><a href='09f3d58097316afbbcb8cd014badfa9e.html'><span class='node-icon staruml-icon icon-UMLClass'></span>SoftReference</a></li>
        
        <li><a href='24d826010a67fcfa942117fea822ccb1.html'><span class='node-icon staruml-icon icon-UMLClass'></span>WeakReference</a></li>
        
    </ul>
</section>



        
        


        
        


        
        

      

      <!-- Interface -->

      

      <!-- Component -->

      

      <!-- Node -->

      

      <!-- Actor -->

      

      <!-- Use Case -->

      

      <!-- Template Parameters -->

      
      <section>
        <h3>Template Parameters</h3>
        <table class="table table-striped table-bordered">
          <tr>
            <th>Visibility</th>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="ebb79e4d6efb650130c32138677a0385.html">T</a></td>
            <td></td>
            <td></td>
          </tr>
          
        </table>
      </section>
      

      <!-- Literals -->

      

      <!-- Attributes -->

      
      <section>
        <h3>Attributes</h3>
        <table class="table table-striped table-bordered">
          <tr>
            <th>Visibility</th>
            <th>Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="aeb7e05d22a82a8c6b202a5133223606.html">processPendingActive</a></td>
            <td>boolean</td>
            <td></td>
          </tr>
          
        </table>
      </section>
      

      <!-- Operations -->

      
      <section>
        <h3>Operations</h3>
        <table class="table table-striped table-bordered">
          <tr>
            <th>Visibility</th>
            <th>Name</th>
            <th>Description</th>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="9dd998a2cf7acd923e2fcec52d94b975.html">getAndClearReferencePendingList(): Reference</a></td>
            <td><p>Atomically get and clear (set to null) the VM&#39;s pending-Reference list.</p></td>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="061d321ef5d3776a0c1e01eec06e7a76.html">hasReferencePendingList(): boolean</a></td>
            <td><p>Test whether the VM&#39;s pending-Reference list contains any entries.</p></td>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="94e0f82a43fbd37091c27e846bd12829.html">waitForReferencePendingList(): void</a></td>
            <td><p>Wait until the VM&#39;s pending-Reference list may be non-null.</p></td>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="616ffd6f29a53221886945eb559cc027.html">processPendingReferences(): void</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>private</td>
            <td><a href="b3ed8207a2021f2182a7b0cb2e005a86.html">waitForReferenceProcessing(): boolean</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="d7ff7cf8866f8afaa053946a60cb48cb.html">get(): T</a></td>
            <td><p>-- Referent accessor and setters --
Returns this reference object&#39;s referent.  If this reference object has
been cleared, either by the program or by the garbage collector, then
this method returns {@code null}.
@return   The object to which this reference refers, or
{@code null} if this reference object has been cleared</p></td>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="16d66900b365bc048bcbb6ab298914b4.html">clear(): void</a></td>
            <td><p>Clears this reference object.  Invoking this method will not cause this
object to be enqueued.
&lt;p&gt; This method is invoked only by Java code; when the garbage collector
clears references it does so directly, without invoking this method.</p></td>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="88b53178863d4be1abe7d28628af6725.html">isEnqueued(): boolean</a></td>
            <td><p>-- Queue operations --
Tells whether or not this reference object has been enqueued, either by
the program or by the garbage collector.  If this reference object was
not registered with a queue when it was created, then this method will
always return {@code false}.
@return   {@code true} if and only if this reference object has
been enqueued</p></td>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="811df8f8cf1f5e526f225f1a441c6968.html">enqueue(): boolean</a></td>
            <td><p>Clears this reference object and adds it to the queue with which
it is registered, if any.
&lt;p&gt; This method is invoked only by Java code; when the garbage collector
enqueues references it does so directly, without invoking this method.
@return   {@code true} if this reference object was successfully
enqueued; {@code false} if it was already enqueued or if
it was not registered with a queue when it was created</p></td>
          </tr>
          
          <tr>
            <td>protected</td>
            <td><a href="2f1f03547ea1395f821aa05bba765c10.html">clone(): Object</a></td>
            <td><p>Throws {@link CloneNotSupportedException}. A {@code Reference} cannot be
meaningfully cloned. Construct a new {@code Reference} instead.
@return never returns normally
@throws  CloneNotSupportedException always
@since 11</p></td>
          </tr>
          
          <tr>
            <td>package</td>
            <td><a href="5f9ebc59e0f571280481c312a724fa54.html">Reference(referent: T)</a></td>
            <td><p>-- Constructors --</p></td>
          </tr>
          
          <tr>
            <td>package</td>
            <td><a href="38269be0162501e4d13c720d780dcc07.html">Reference(referent: T, queue: ReferenceQueue)</a></td>
            <td></td>
          </tr>
          
          <tr>
            <td>public</td>
            <td><a href="f8db8f5300084ef93dfdbf08f7fac0cd.html">reachabilityFence(ref: Object): void</a></td>
            <td><p>Ensures that the object referenced by the given reference remains
&lt;a href=&quot;package-summary.html#reachability&quot;&gt;&lt;em&gt;strongly reachable&lt;/em&gt;&lt;/a&gt;,
regardless of any prior actions of the program that might otherwise cause
the object to become unreachable; thus, the referenced object is not
reclaimable by garbage collection at least until after the invocation of
this method.  Invocation of this method does not itself initiate garbage
collection or finalization.
&lt;p&gt; This method establishes an ordering for
&lt;a href=&quot;package-summary.html#reachability&quot;&gt;&lt;em&gt;strong reachability&lt;/em&gt;&lt;/a&gt;
with respect to garbage collection.  It controls relations that are
otherwise only implicit in a program -- the reachability conditions
triggering garbage collection.  This method is designed for use in
uncommon situations of premature finalization where using
{@code synchronized} blocks or methods, or using other synchronization
facilities are not possible or do not provide the desired control.  This
method is applicable only when reclamation may have visible effects,
which is possible for objects with finalizers (See Section 12.6
of &lt;cite&gt;The Java&amp;trade; Language Specification&lt;/cite&gt;) that
are implemented in ways that rely on ordering control for
correctness.
@apiNote
Finalization may occur whenever the virtual machine detects that no
reference to an object will ever be stored in the heap: The garbage
collector may reclaim an object even if the fields of that object are
still in use, so long as the object has otherwise become unreachable.
This may have surprising and undesirable effects in cases such as the
following example in which the bookkeeping associated with a class is
managed through array indices.  Here, method {@code action} uses a
{@code reachabilityFence} to ensure that the {@code Resource} object is
not reclaimed before bookkeeping on an associated
{@code ExternalResource} has been performed; in particular here, to
ensure that the array slot holding the {@code ExternalResource} is not
nulled out in method {@link Object#finalize}, which may otherwise run
concurrently.
&lt;pre&gt; {@code
class Resource {
private static ExternalResource[] externalResourceArray = ...
int myIndex;
Resource(...) {
myIndex = ...
externalResourceArray[myIndex] = ...;
...
}
protected void finalize() {
externalResourceArray[myIndex] = null;
...
}
public void action() {
try {
// ...
int i = myIndex;
Resource.update(externalResourceArray[i]);
} finally {
Reference.reachabilityFence(this);
}
}
private static void update(ExternalResource ext) {
ext.status = ...;
}
}}&lt;/pre&gt;
Here, the invocation of {@code reachabilityFence} is nonintuitively
placed &lt;em&gt;after&lt;/em&gt; the call to {@code update}, to ensure that the
array slot is not nulled out by {@link Object#finalize} before the
update, even if the call to {@code action} was the last use of this
object.  This might be the case if, for example a usage in a user program
had the form {@code new Resource().action();} which retains no other
reference to this {@code Resource}.  While probably overkill here,
{@code reachabilityFence} is placed in a {@code finally} block to ensure
that it is invoked across all paths in the method.  In a method with more
complex control paths, you might need further precautions to ensure that
{@code reachabilityFence} is encountered along all of them.
&lt;p&gt; It is sometimes possible to better encapsulate use of
{@code reachabilityFence}.  Continuing the above example, if it were
acceptable for the call to method {@code update} to proceed even if the
finalizer had already executed (nulling out slot), then you could
localize use of {@code reachabilityFence}:
&lt;pre&gt; {@code
public void action2() {
// ...
Resource.update(getExternalResource());
}
private ExternalResource getExternalResource() {
ExternalResource ext = externalResourceArray[myIndex];
Reference.reachabilityFence(this);
return ext;
}}&lt;/pre&gt;
&lt;p&gt; Method {@code reachabilityFence} is not required in constructions
that themselves ensure reachability.  For example, because objects that
are locked cannot, in general, be reclaimed, it would suffice if all
accesses of the object, in all methods of class {@code Resource}
(including {@code finalize}) were enclosed in {@code synchronized (this)}
blocks.  (Further, such blocks must not include infinite loops, or
themselves be unreachable, which fall into the corner case exceptions to
the &quot;in general&quot; disclaimer.)  However, method {@code reachabilityFence}
remains a better option in cases where this approach is not as efficient,
desirable, or possible; for example because it would encounter deadlock.
@param ref the reference. If {@code null}, this method has no effect.
@since 9
@jls 12.6 Finalization of Class Instances</p></td>
          </tr>
          
        </table>
      </section>
      

      <!-- Receptions -->

      

      <!-- Extension Points -->

      

      <!-- Parameters -->

      

      <!-- Diagrams -->

      
      

      <!-- Behavior -->

      

      <!-- Action -->

      

      <!-- Interaction -->

      

      <!-- CombinedFragment -->

      

      <!-- Activity -->

      

      <!-- State Machine -->

      

      <!-- State Machine -->

      

      <!-- State -->

      

      <!-- Vertex -->

      

      <!-- Transition -->

      

      <!-- Data Model (ERD) -->

      

      <!-- Columns (ERD) -->

      

      <!-- Related Entities (ERD) -->

      

      <!-- Data Flows (DFD) -->

      

      <!-- Flows (Flowchart) -->

      

      <!-- Properties -->

      <section>
        <h3>Properties</h3>
        
        <table class="table table-striped table-bordered">
    <tr>
        <th width="50%">Name</th>
        <th width="50%">Value</th>
    </tr>
    
    
    
    
    
    
    
    <tr>
        <td>name</td>
        <td>Reference</td>
    </tr>
    
    
    
    
    
    
    
    
    
    
    
    <tr>
        <td>stereotype</td>
        <td><span class='label label-info'>null</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>visibility</td>
        <td>public</td>
    </tr>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <tr>
        <td>isAbstract</td>
        <td><span class='label label-info'>true</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isFinalSpecialization</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isLeaf</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
    
    
    <tr>
        <td>isActive</td>
        <td><span class='label label-info'>false</span></td>
    </tr>
    
    
    
</table>                

      </section>

      <!-- Tags -->

      

      <!-- Constraints, Dependencies, Dependants -->

      
        
        


        
        


        
        

      

      <!-- Relationships -->

      
      
<section class="element-list">
    <h3>Relationships</h3>
    <ul class="nav nav-list">
        
        <li><a href='a6662e9c635a83573bce27872ddf3586.html'><span class='node-icon staruml-icon icon-UMLGeneralization'></span>(FinalReference→Reference)</a></li>
        
        <li><a href='e600c375f3ba8e06532dbf1a8e7f23dd.html'><span class='node-icon staruml-icon icon-UMLGeneralization'></span>(PhantomReference→Reference)</a></li>
        
        <li><a href='43d409901c0e34fe1cb2b2e3c3cfca65.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—T)</a></li>
        
        <li><a href='9eff3911b1132158a8f5e1db8f4138c6.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—ReferenceQueue)</a></li>
        
        <li><a href='ed5dd8404a95653a89ba1ccc1b6d881b.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Reference)</a></li>
        
        <li><a href='1213c2c62b87f66992483f1d1cd2cf53.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Reference)</a></li>
        
        <li><a href='717ec990d8bee379a2222c70e3881ae0.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Object)</a></li>
        
        <li><a href='b7cf2032d7f7aab01e16a2757f6f91d6.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(ReferenceQueue—Reference)</a></li>
        
        <li><a href='146ff3051b394ecbb26e5fa6e42b7bde.html'><span class='node-icon staruml-icon icon-UMLGeneralization'></span>(SoftReference→Reference)</a></li>
        
        <li><a href='f23f5aed0e8085510b5f5fc1a00f63c9.html'><span class='node-icon staruml-icon icon-UMLGeneralization'></span>(WeakReference→Reference)</a></li>
        
    </ul>
</section>



      <!-- Owned Elements -->

      
      
<section class="element-list">
    <h3>Owned Elements</h3>
    <ul class="nav nav-list">
        
        <li><a href='0dc4c87f2404f0c4482a0d2c83b1dec8.html'><span class='node-icon staruml-icon icon-UMLClass'></span>ReferenceHandler</a></li>
        
        <li><a href='43d409901c0e34fe1cb2b2e3c3cfca65.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—T)</a></li>
        
        <li><a href='9eff3911b1132158a8f5e1db8f4138c6.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—ReferenceQueue)</a></li>
        
        <li><a href='ed5dd8404a95653a89ba1ccc1b6d881b.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Reference)</a></li>
        
        <li><a href='1213c2c62b87f66992483f1d1cd2cf53.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Reference)</a></li>
        
        <li><a href='717ec990d8bee379a2222c70e3881ae0.html'><span class='node-icon staruml-icon icon-UMLAssociation'></span>(Reference—Object)</a></li>
        
    </ul>
</section>



    </div>
  </body>
</html>
